name: Phoebus build

on: [push, pull_request]

jobs:
  all_tests(UI, Integration, Unit Tests, etc):
    runs-on: ubuntu-latest
    container:
      image: lgomezwhl/phoebus-ci:latest
    steps:
    - uses: actions/checkout@v2
    - run: |
        git fetch --prune --unshallow --tags
    - name: Set up JDK 11
      uses: actions/setup-java@v1
      with:
        java-version: 11
    - name: Install Dependencies
      run: |
        sudo apt install -y protobuf-compiler
    - name: Check coding style
      run: |
        cd core/commander-core
        mvn fmt:check
        cd ../..
        cd app/commander
        mvn fmt:check
        cd ../..
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
#      - name: Run Tests
#        run: |
#          mvn -Dgpg.skip=true -DskipTests --batch-mode install
#          mvn verify -Pall-tests   -Dtestfx.headless=true -Dtestfx.robot=glass -Djava.awt.headless=true  -Dprism.text=native
